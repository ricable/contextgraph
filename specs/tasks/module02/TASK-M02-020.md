# TASK-M02-020: Define SuggestedAction Enum

```xml
<task_spec id="TASK-M02-020" version="1.0">
<metadata>
  <title>Define SuggestedAction Enum</title>
  <status>ready</status>
  <layer>surface</layer>
  <module>module-02</module>
  <sequence>20</sequence>
  <priority>high</priority>
  <estimated_hours>1</estimated_hours>
  <implements>
    <item>TECH-CORE-002 Section 2.4: CognitivePulse specification</item>
    <item>REQ-CORE-008: Pulse action requirements</item>
  </implements>
  <depends_on>
    <!-- No dependencies - this is a standalone enum -->
  </depends_on>
  <estimated_complexity>low</estimated_complexity>
</metadata>

<context>
The SuggestedAction enum represents the recommended next action for the cognitive system based on current entropy and coherence levels. This is part of the CognitivePulse that provides guidance to agents on what action to take. The action is computed based on the entropy/coherence decision matrix defined in the PRD.
</context>

<input_context_files>
  <file purpose="PRD reference for action decision matrix">docs2/contextprd.md</file>
  <file purpose="Constitution reference for suggested actions">docs2/constitution.yaml</file>
</input_context_files>

<prerequisites>
  <check>crates/context-graph-core/src/pulse.rs exists from TASK-M02-019</check>
</prerequisites>

<scope>
  <in_scope>
    - SuggestedAction enum with 7 variants: Ready, Continue, Explore, Consolidate, Prune, Stabilize, Review
    - description() method returning &amp;'static str for human-readable explanations
    - Default trait implementation (returns Continue)
    - Serde Serialize/Deserialize with snake_case serialization
    - Clone, Copy, Debug, PartialEq, Eq, Hash derives
    - Unit tests for all methods
  </in_scope>
  <out_of_scope>
    - EmotionalState enum (TASK-M02-019)
    - CognitivePulse struct (TASK-M02-021)
    - compute_suggested_action() logic (TASK-M02-022)
  </out_of_scope>
</scope>

<definition_of_done>
  <signatures>
    <signature file="crates/context-graph-core/src/pulse.rs">
/// Represents the recommended action based on cognitive pulse metrics.
/// Computed from entropy and coherence levels.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum SuggestedAction {
    /// System is ready for new input (low entropy, high coherence)
    Ready,
    /// Continue current activity (balanced state)
    Continue,
    /// Explore new knowledge (high entropy, high coherence)
    Explore,
    /// Consolidate existing knowledge (low entropy, moderate coherence)
    Consolidate,
    /// Prune redundant information
    Prune,
    /// Stabilize context (high entropy, low coherence)
    Stabilize,
    /// Review and clarify context
    Review,
}

impl SuggestedAction {
    /// Returns a human-readable description of this action.
    pub fn description(&amp;self) -> &amp;'static str;
}

impl Default for SuggestedAction {
    fn default() -> Self;
}
    </signature>
  </signatures>

  <constraints>
    - Serde serialization must use snake_case
    - Default must return Continue (balanced state assumption)
    - Descriptions must be actionable guidance for agents
  </constraints>

  <verification>
    - cargo build --package context-graph-core compiles without errors
    - cargo test --package context-graph-core pulse passes all tests
    - cargo clippy --package context-graph-core shows no warnings
  </verification>
</definition_of_done>

<pseudo_code>
pulse.rs (additions):

// SuggestedAction enum with derives
// Seven variants representing recommended actions

impl SuggestedAction:
  fn description():
    match self:
      Ready => "System ready for new input - low entropy, high coherence"
      Continue => "Continue current activity - balanced state"
      Explore => "Explore new knowledge - use epistemic_action or expand context"
      Consolidate => "Consolidate existing knowledge - trigger dream or merge concepts"
      Prune => "Prune redundant information - review curation_tasks"
      Stabilize => "Stabilize context - reduce entropy before proceeding"
      Review => "Review and clarify context - use critique_context or reflect_on_memory"

impl Default:
  fn default() -> Self:
    SuggestedAction::Continue

#[cfg(test)]
mod suggested_action_tests:
  test_default_is_continue()
  test_serde_roundtrip()
  test_description_not_empty()
  test_all_variants_have_unique_descriptions()
</pseudo_code>

<files_to_create>
  <!-- No new files - additions to existing pulse.rs -->
</files_to_create>

<files_to_modify>
  <file path="crates/context-graph-core/src/pulse.rs">Add SuggestedAction enum</file>
  <file path="crates/context-graph-core/src/lib.rs">Add SuggestedAction to re-exports</file>
</files_to_modify>

<validation_criteria>
  <criterion>SuggestedAction enum compiles with all 7 variants</criterion>
  <criterion>Default returns Continue</criterion>
  <criterion>Serde serialization uses snake_case</criterion>
  <criterion>description() returns meaningful, actionable string for each variant</criterion>
</validation_criteria>

<test_commands>
  <command>cargo build --package context-graph-core</command>
  <command>cargo test --package context-graph-core suggested_action -- --nocapture</command>
  <command>cargo clippy --package context-graph-core -- -D warnings</command>
</test_commands>
</task_spec>
```

## Implementation Notes

### Action Decision Matrix (Reference)
From the PRD, actions map to entropy (E) and coherence (C) as follows:

| E | C | Action |
|---|---|--------|
| >0.7 | >0.5 | Explore (epistemic_action) |
| >0.7 | <0.4 | Stabilize (trigger_dream/critique_context) |
| <0.4 | >0.7 | Ready (Continue) |
| <0.4 | <0.4 | Review (get_neighborhood) |
| 0.4-0.7 | 0.4-0.7 | Continue |

This logic is implemented in TASK-M02-022 (CognitivePulse::compute_suggested_action).

### Agent Guidance
Each description is designed to guide the agent to use specific MCP tools:
- **Explore**: `epistemic_action`, `trigger_dream(rem)`
- **Consolidate**: `trigger_dream(nrem)`, `merge_concepts`
- **Stabilize**: `trigger_dream`, `critique_context`
- **Review**: `critique_context`, `reflect_on_memory`, `get_neighborhood`

---

*Task ID: TASK-M02-020*
*Module: 02 - Core Infrastructure*
*Layer: Surface*
