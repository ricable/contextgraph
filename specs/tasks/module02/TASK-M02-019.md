# TASK-M02-019: Define EmotionalState Enum

```xml
<task_spec id="TASK-M02-019" version="1.0">
<metadata>
  <title>Define EmotionalState Enum</title>
  <status>ready</status>
  <layer>surface</layer>
  <module>module-02</module>
  <sequence>19</sequence>
  <priority>high</priority>
  <estimated_hours>1</estimated_hours>
  <implements>
    <item>TECH-CORE-002 Section 2.4: CognitivePulse specification</item>
    <item>REQ-CORE-007: CognitivePulse requirements</item>
  </implements>
  <depends_on>
    <!-- No dependencies - this is a standalone enum -->
  </depends_on>
  <estimated_complexity>low</estimated_complexity>
</metadata>

<context>
The EmotionalState enum represents the cognitive-emotional state of the system, used in the CognitivePulse to modulate UTL (Unified Theory of Learning) calculations. Each state has a weight modifier that affects how memories are processed and retrieved. This follows the bio-nervous system model where emotional state influences learning and recall.
</context>

<input_context_files>
  <file purpose="Constitution reference for UTL formula">docs2/constitution.yaml</file>
  <file purpose="PRD reference for Cognitive Pulse">docs2/contextprd.md</file>
</input_context_files>

<prerequisites>
  <check>crates/context-graph-core directory exists</check>
  <check>Cargo.toml for context-graph-core crate exists</check>
</prerequisites>

<scope>
  <in_scope>
    - EmotionalState enum with 7 variants: Neutral, Curious, Focused, Stressed, Fatigued, Engaged, Confused
    - weight_modifier() method returning f32 for UTL calculations
    - description() method returning &amp;'static str
    - Default trait implementation (returns Neutral)
    - Serde Serialize/Deserialize with lowercase serialization
    - Clone, Copy, Debug, PartialEq, Eq, Hash derives
    - Unit tests for all methods
  </in_scope>
  <out_of_scope>
    - SuggestedAction enum (TASK-M02-020)
    - CognitivePulse struct (TASK-M02-021)
    - Integration with neuromodulation system (future module)
  </out_of_scope>
</scope>

<definition_of_done>
  <signatures>
    <signature file="crates/context-graph-core/src/pulse.rs">
/// Represents the cognitive-emotional state of the system.
/// Each state has a weight modifier that affects UTL calculations.
#[derive(Debug, Clone, Copy, PartialEq, Eq, Hash, Serialize, Deserialize)]
#[serde(rename_all = "snake_case")]
pub enum EmotionalState {
    /// Baseline state with no modulation
    Neutral,
    /// Active exploration state - enhanced novelty seeking
    Curious,
    /// Deep concentration state - enhanced coherence
    Focused,
    /// High cognitive load - reduced processing capacity
    Stressed,
    /// Low energy state - reduced overall performance
    Fatigued,
    /// Active engagement - balanced enhancement
    Engaged,
    /// Uncertainty state - reduced confidence
    Confused,
}

impl EmotionalState {
    /// Returns the weight modifier for UTL calculations.
    ///
    /// Modifiers:
    /// - Neutral: 1.0 (no modification)
    /// - Curious: 1.2 (enhanced novelty seeking)
    /// - Focused: 1.3 (enhanced coherence)
    /// - Stressed: 0.8 (reduced capacity)
    /// - Fatigued: 0.6 (reduced performance)
    /// - Engaged: 1.15 (balanced enhancement)
    /// - Confused: 0.9 (reduced confidence)
    pub fn weight_modifier(&amp;self) -> f32;

    /// Returns a human-readable description of this state.
    pub fn description(&amp;self) -> &amp;'static str;
}

impl Default for EmotionalState {
    fn default() -> Self;
}
    </signature>
  </signatures>

  <constraints>
    - Weight modifiers must be positive f32 values
    - Serde serialization must use lowercase (snake_case)
    - Module must not exceed 500 lines (excluding tests)
    - Follow Rust naming conventions per constitution.yaml
  </constraints>

  <verification>
    - cargo build --package context-graph-core compiles without errors
    - cargo test --package context-graph-core pulse passes all tests
    - cargo clippy --package context-graph-core shows no warnings
    - cargo fmt --package context-graph-core --check passes
  </verification>
</definition_of_done>

<pseudo_code>
pulse.rs:
  // Module documentation
  // Imports: serde

  // EmotionalState enum with derives
  // Seven variants representing cognitive-emotional states

  impl EmotionalState:
    fn weight_modifier():
      match self:
        Neutral => 1.0
        Curious => 1.2
        Focused => 1.3
        Stressed => 0.8
        Fatigued => 0.6
        Engaged => 1.15
        Confused => 0.9

    fn description():
      match self:
        Neutral => "Baseline cognitive state with no modulation"
        Curious => "Active exploration with enhanced novelty seeking"
        Focused => "Deep concentration with enhanced coherence processing"
        Stressed => "High cognitive load reducing processing capacity"
        Fatigued => "Low energy state with reduced overall performance"
        Engaged => "Active engagement with balanced enhancement"
        Confused => "Uncertainty state with reduced confidence"

  impl Default:
    fn default() -> Self:
      EmotionalState::Neutral

#[cfg(test)]
mod tests:
  test_weight_modifier_values()
  test_default_is_neutral()
  test_serde_roundtrip()
  test_description_not_empty()
</pseudo_code>

<files_to_create>
  <file path="crates/context-graph-core/src/pulse.rs">EmotionalState enum (SuggestedAction and CognitivePulse added in later tasks)</file>
</files_to_create>

<files_to_modify>
  <file path="crates/context-graph-core/src/lib.rs">Add pub mod pulse; and re-export EmotionalState</file>
</files_to_modify>

<validation_criteria>
  <criterion>EmotionalState enum compiles with all 7 variants</criterion>
  <criterion>weight_modifier() returns correct values for each state</criterion>
  <criterion>Default returns Neutral</criterion>
  <criterion>Serde serialization uses lowercase</criterion>
  <criterion>description() returns non-empty string for each variant</criterion>
</validation_criteria>

<test_commands>
  <command>cargo build --package context-graph-core</command>
  <command>cargo test --package context-graph-core pulse -- --nocapture</command>
  <command>cargo clippy --package context-graph-core -- -D warnings</command>
  <command>cargo fmt --package context-graph-core --check</command>
</test_commands>
</task_spec>
```

## Implementation Notes

### Weight Modifier Rationale
The weight modifiers are based on cognitive science research on how emotional states affect learning:
- **Curious (1.2)**: Dopaminergic enhancement of novelty processing
- **Focused (1.3)**: Highest modifier due to optimal attentional state
- **Stressed (0.8)**: Cortisol interference with memory consolidation
- **Fatigued (0.6)**: Lowest modifier due to depleted cognitive resources
- **Engaged (1.15)**: Flow state with balanced arousal
- **Confused (0.9)**: Mild impairment from uncertainty

### Integration with UTL
The weight modifier feeds into the UTL formula:
```
L = f((ΔS × ΔC) · wₑ · cos φ)
```
Where `wₑ` (emotional weight) is derived from `EmotionalState::weight_modifier()`.

---

*Task ID: TASK-M02-019*
*Module: 02 - Core Infrastructure*
*Layer: Surface*
